{"ast":null,"code":"import Papa from 'papaparse';\nimport * as XLSX from 'xlsx';\nimport axios from 'axios';\nconst web_api_url = 'http://127.0.0.1:5000';\nexport default {\n  data() {\n    return {\n      data: [],\n      columns: [],\n      // 用於儲存 CSV 中的欄位名稱\n      selectedColumns: {},\n      // 用於儲存欄位的勾選狀態\n      selectedColumnsArray: [],\n      uploadedFile: null,\n      // 存儲上傳文件\n      isServerReturn: false,\n      isLoading: false,\n      // 默認為false\n      isWatchData: false,\n      dataTable: {\n        attributeName: 'array' // 初始化屬性\n      },\n\n      keywordcount: 0,\n      VBTables: {\n        attributeName: 'array' // 初始化屬性\n      },\n\n      // newVBData: '',\n      isPart3: false,\n      // VBselectedColumns: {},\n      VBselectedColumnsArray: [\"Hawoo_Keywords\"],\n      Flaskdata: {},\n      isFetching: false,\n      fetchInterval: null,\n      // 用於存儲定期抓取的ID\n      isOver: false\n    };\n  },\n  methods: {\n    handleFileChange(event) {\n      this.uploadedFile = event.target.files[0];\n      if (this.uploadedFile.name.includes('csv')) {\n        Papa.parse(this.uploadedFile, {\n          complete: results => {\n            this.data = results.data;\n            this.columns = results.data[0];\n          }\n        });\n      } else if (this.uploadedFile.name.includes('xl')) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          const data = e.target.result;\n          const workbook = XLSX.read(data, {\n            type: 'binary'\n          });\n\n          // Assuming first sheet and first row is header\n          const firstSheetName = workbook.SheetNames[0];\n          const worksheet = workbook.Sheets[firstSheetName];\n          const jsonData = XLSX.utils.sheet_to_json(worksheet, {\n            header: 1\n          });\n          this.columns = jsonData[0];\n        };\n        reader.readAsBinaryString(this.uploadedFile);\n      } else {\n        alert(\"請上傳CSV或Excel文件！\");\n      }\n    },\n    async handleSubmit() {\n      this.selectedColumnsArray = Object.keys(this.selectedColumns).filter(column => this.selectedColumns[column]);\n      if (!this.uploadedFile) {\n        alert(\"請先選擇文件\");\n        return;\n      }\n      if (this.selectedColumnsArray.length != 1) {\n        alert(\"請選擇1個欄位!\");\n        return;\n      }\n\n      // 使用FormData來上傳文件和列名\n      const formData = new FormData();\n      formData.append('file', this.uploadedFile);\n      formData.append('columns', this.selectedColumnsArray);\n      // 開始上傳\n      this.isLoading = true;\n      try {\n        const response = await fetch(web_api_url + '/upload_keywords_data/', {\n          // 替換為你的服務器端點\n          method: 'POST',\n          body: formData\n        });\n        if (response.ok) {\n          alert('文件上傳成功！');\n        } else {\n          alert('文件上傳失敗:' + response.message);\n        }\n      } catch (error) {\n        console.error(\"上傳錯誤:\", error);\n        alert('上傳過程中出現錯誤，請重試！');\n      } finally {\n        this.isLoading = false; // 結束上傳\n        this.isServerReturn = true;\n      }\n    },\n    async WatchKeywordsData() {\n      this.isWatchData = !this.isWatchData;\n      if (this.isWatchData) {\n        try {\n          const response = await fetch(web_api_url + '/return_keywords_data/');\n          const data = await response.json();\n\n          // 假設API返回的是一个標準的JSON格式的DataFrame\n          this.dataTable = data.dataframe;\n          this.keywordcount = data.keywords_count;\n        } catch (error) {\n          console.error(\"Error loading data:\", error);\n        }\n      }\n    },\n    async deleteVectorDB() {\n      if (window.confirm('確定要刪除向量資料庫嗎？')) {\n        const formData = new FormData();\n        formData.append('VBTable_name', this.VBselectedColumnsArray);\n        this.isLoading = true;\n        try {\n          const response = await fetch(web_api_url + '/remove_vector_table/', {\n            // 替換為你的服務器端點\n            method: 'POST',\n            body: formData\n          });\n          const data = await response.json();\n          if (response.ok) {\n            if (data.isRemoved == true) {\n              alert('Vector DB刪除成功');\n            }\n            if (data.isRemoved == false) {\n              alert('Vector DB原本就不存在');\n            }\n          } else {\n            alert('Vector DB刪除發生異常:' + response.message);\n          }\n          console.log(\"Delete vector DB:\", data);\n        } catch (error) {\n          console.error(\"Error loading data:\", error);\n        } finally {\n          this.isLoading = false; // 結束\n          this.isFetching = false;\n        }\n      }\n    },\n    async StartUpdateVDB() {\n      if (this.VBselectedColumnsArray.length != 1) {\n        alert(\"請選擇1個欄位!\");\n        return;\n      }\n\n      // 使用FormData來上傳文件和列名\n      const formData = new FormData();\n      formData.append('VBTable_name', this.VBselectedColumnsArray);\n      this.isFetching = !this.isFetching;\n      try {\n        const response = await fetch(web_api_url + '/update_vector_DB/', {\n          // 替換為你的服務器端點\n          method: 'POST',\n          body: formData\n        });\n        const data = await response.json();\n        console.log(\"Start Update vector DB:\", data);\n      } catch (error) {\n        console.error(\"Error loading data:\", error);\n      }\n    },\n    async vectorDB_info() {\n      try {\n        this.isWatchData = false;\n        const response = await fetch(web_api_url + '/return_table_information/');\n        const data = await response.json();\n        this.VBTables = data[\"vectorDB_table_name\"];\n        this.isPart3 = !this.isPart3;\n      } catch (error) {\n        console.error(\"Error loading data:\", error);\n      }\n    },\n    async handleVBSubmit() {\n      this.VBselectedColumnsArray = Object.keys(this.VBselectedColumns).filter(column => this.VBselectedColumns[column]);\n      if (this.VBselectedColumnsArray.length != 1) {\n        alert(\"請選擇1個欄位!\");\n        return;\n      }\n\n      // 使用FormData來上傳文件和列名\n      const formData = new FormData();\n      formData.append('VBTable_name', this.VBselectedColumnsArray);\n      // console.log(\"formData\", formData);\n      // 開始上傳\n      this.isLoading = true;\n      try {\n        const response = await fetch(web_api_url + '/update_vector_DB/', {\n          // 替換為你的服務器端點\n          method: 'POST',\n          body: formData\n        });\n        if (response.ok) {\n          alert('文件上傳成功！');\n          console.log(response); // 處理来自服務器的響應\n        } else {\n          alert('文件上傳失敗:' + response.message);\n        }\n      } catch (error) {\n        console.error(\"上傳錯誤:\", error);\n        alert('上傳過程中出現錯誤，請重試！');\n      } finally {\n        this.isLoading = false; // 結束上傳\n        this.isServerReturn = true;\n      }\n      // },addData() {\n      //           if (this.newVBData) {\n      //               this.VBTables.push(this.newVBData);\n      //               this.newVBData = '';\n      //           } else {\n      //               alert('Please enter some data.');\n      //           }\n    },\n    fetchData() {\n      axios.get(web_api_url + '/get_vector_DB_log').then(response => {\n        this.Flaskdata = response.data;\n        if (response.data['reload'] === true) {\n          this.isFetching = false;\n        }\n        if (response.data['over'] === true) {\n          this.isFetching = false;\n          this.isOver = true;\n        }\n      });\n    },\n    toggleFetching() {\n      this.StartUpdateVDB();\n      if (this.isFetching) {\n        this.fetchData();\n        this.fetchInterval = setInterval(this.fetchData, 1000);\n      } else {\n        clearInterval(this.fetchInterval); // 如果不抓取, 則停止定期抓取\n      }\n    }\n  }\n};","map":{"version":3,"names":["Papa","XLSX","axios","web_api_url","data","columns","selectedColumns","selectedColumnsArray","uploadedFile","isServerReturn","isLoading","isWatchData","dataTable","attributeName","keywordcount","VBTables","isPart3","VBselectedColumnsArray","Flaskdata","isFetching","fetchInterval","isOver","methods","handleFileChange","event","target","files","name","includes","parse","complete","results","reader","FileReader","onload","e","result","workbook","read","type","firstSheetName","SheetNames","worksheet","Sheets","jsonData","utils","sheet_to_json","header","readAsBinaryString","alert","handleSubmit","Object","keys","filter","column","length","formData","FormData","append","response","fetch","method","body","ok","message","error","console","WatchKeywordsData","json","dataframe","keywords_count","deleteVectorDB","window","confirm","isRemoved","log","StartUpdateVDB","vectorDB_info","handleVBSubmit","VBselectedColumns","fetchData","get","then","toggleFetching","setInterval","clearInterval"],"sources":["E:\\Fred\\AI_UI\\vue_route\\vue-route\\src\\views\\UpdateVectorDB.vue"],"sourcesContent":["<template>\n  \n  <div>\n    <!-- 加載指示器 -->\n    <div v-if=\"isLoading\" class=\"loading-overlay\">\n      <img src=\"/jumpingsheep.gif\" alt=\"上傳中...\" class=\"loading-image\"/>\n    </div>\n    <!-- 第一部分 -->\n    <div v-if=\"isServerReturn==false\" class=\"First-Part\">\n      \n      <h3 class=\"title_description\">\n        上傳產品關鍵字資料(csv,xlsx)\n      </h3>\n      <input type=\"file\" @change=\"handleFileChange\">\n      <button class=\"delete-VectorDB\" @click=\"deleteVectorDB\">刪除向量資料庫</button>\n\n      <!-- 呈現欄位名稱的表格 -->\n      <div v-if=\"columns.length\">\n        <h3 class=\"title_description\">\n          選取1個Keywords對應欄位\n        </h3>\n        <table v-if=\"columns.length\">\n          <thead>\n            <tr>\n              <th>Select</th>\n              <th>Column Name</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"column in columns\" :key=\"column\">\n              <td><input type=\"checkbox\" v-model=\"selectedColumns[column]\"></td>\n              <td>{{ column }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <button class=\"submit-button\" @click=\"handleSubmit\" v-if=\"columns.length\">提交選取欄位</button>\n    </div>\n    \n    <!-- 第二部分 -->\n    <div v-if=\"isServerReturn\" class=\"Part2\">\n      <!-- 按鈕加載數據 -->\n      <button class=\"loadData-button\" @click=\"WatchKeywordsData\">觀看前處理資料</button>\n      <button v-if=\"isFetching==false\" class=\"update-vectorDB-button\" @click=\"vectorDB_info\">新增或更新Keywords向量資料庫</button>\n      <button class=\"delete-VectorDB\" @click=\"deleteVectorDB\">刪除向量資料庫</button>\n      <table v-if=\"isWatchData\">\n        <thead>\n          <tr>\n            <!-- 假設你知道你的DataFrame的列名 -->\n            <th>Keywords</th>\n            <!-- ... 其他列名 ... -->\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"row in dataTable\" :key=\"row.id\">\n            <td>{{ row['Keywords'] }}</td>\n            <!-- ... 其他數據列 ... -->\n          </tr>\n        </tbody>\n      </table>\n      <table v-if=\"isWatchData\">\n            <tr>\n                <th>Keywords總數量</th>\n            </tr>\n            <tbody>\n                <tr>\n                    <td>{{ keywordcount }}</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <!-- 第三部分 -->\n    <!-- <div v-if=\"isPart3\" class=\"Part3\"> -->\n      <!-- <table  v-if=\"VBTables.length\">\n          <thead>\n              <tr>\n                  <th>Select</th>\n                  <th>Vector DB Table Name</th>\n              </tr>\n          </thead>\n          <tbody>\n              <tr v-for=\"item in VBTables\"  :key=\"item\">\n                  <td><input type=\"checkbox\" v-model=\"VBselectedColumns[item]\"></td>\n                  <td>{{ item }}</td>\n              </tr>\n          </tbody>\n      </table> -->\n      <!-- <input type=\"text\" v-model=\"newVBData\" placeholder=\"Enter new data\">\n      <button @click=\"addData\">Add New Table Name</button> -->\n    <!-- </div> -->\n    <button class=\"submit-button\" @click=\"toggleFetching\" v-if=\"VBTables.length\">開始更新VectorDB</button>\n    <div v-if=\"isFetching | isOver\" class=\"insertVectorDBlog\">\n        <h4>{{Flaskdata.data }}</h4>\n    </div>\n  </div>\n</template>\n<script>\n  import Papa from 'papaparse';\n  import * as XLSX from 'xlsx';\n  import axios from 'axios';\n  const web_api_url = 'http://127.0.0.1:5000';\n  export default {\n    data() {\n      return {\n        data: [],\n        columns: [],          // 用於儲存 CSV 中的欄位名稱\n        selectedColumns: {},  // 用於儲存欄位的勾選狀態\n        selectedColumnsArray:[],\n        uploadedFile: null,  // 存儲上傳文件\n        isServerReturn: false,\n        isLoading: false,  // 默認為false\n        isWatchData:false,\n        dataTable: { attributeName: 'array'  // 初始化屬性\n                    },\n        keywordcount:0,\n        VBTables: { attributeName: 'array'  // 初始化屬性\n                    },\n        // newVBData: '',\n        isPart3: false,\n        // VBselectedColumns: {},\n        VBselectedColumnsArray: [\"Hawoo_Keywords\"],\n        Flaskdata: {},\n        isFetching:false,\n        fetchInterval: null,  // 用於存儲定期抓取的ID\n        isOver: false,\n      }\n    },\n    methods: {\n        handleFileChange(event) {\n        this.uploadedFile = event.target.files[0];\n        if (this.uploadedFile.name.includes('csv')) {\n          Papa.parse(this.uploadedFile, {\n            complete: (results) => {\n              this.data = results.data;\n              this.columns = results.data[0];\n            }\n          });\n        }\n        else if (this.uploadedFile.name.includes('xl')) {\n          const reader = new FileReader();\n          \n          reader.onload = (e) => {\n            const data = e.target.result;\n            const workbook = XLSX.read(data, { type: 'binary' });\n            \n            // Assuming first sheet and first row is header\n            const firstSheetName = workbook.SheetNames[0];\n            const worksheet = workbook.Sheets[firstSheetName];\n            const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });\n            this.columns = jsonData[0]\n          };\n          reader.readAsBinaryString(this.uploadedFile);\n        }\n        else {\n            alert(\"請上傳CSV或Excel文件！\");\n        }\n      },async handleSubmit() {\n        this.selectedColumnsArray = Object.keys(this.selectedColumns).filter(column => this.selectedColumns[column]);\n        if (!this.uploadedFile) {\n            alert(\"請先選擇文件\");\n            return;\n          }\n  \n          if (this.selectedColumnsArray.length != 1) {\n            alert(\"請選擇1個欄位!\");\n            return;\n          }\n  \n          // 使用FormData來上傳文件和列名\n          const formData = new FormData();\n          formData.append('file', this.uploadedFile);\n          formData.append('columns', this.selectedColumnsArray);\n          // 開始上傳\n          this.isLoading = true;\n          try {\n            const response = await fetch(web_api_url+'/upload_keywords_data/', { // 替換為你的服務器端點\n              method: 'POST',\n              body: formData\n            });\n            if (response.ok) {\n              alert('文件上傳成功！');\n            } else {\n              alert('文件上傳失敗:' + response.message);\n            }\n          } catch (error) {\n            console.error(\"上傳錯誤:\", error);\n            alert('上傳過程中出現錯誤，請重試！');\n          } finally {\n            this.isLoading = false;  // 結束上傳\n            this.isServerReturn = true;\n          }\n      },async WatchKeywordsData() {\n        this.isWatchData = !this.isWatchData;\n  \n        if (this.isWatchData) {\n          try {\n            const response = await fetch(web_api_url+'/return_keywords_data/');\n            const data = await response.json();\n  \n            // 假設API返回的是一个標準的JSON格式的DataFrame\n            this.dataTable = data.dataframe;\n\n            this.keywordcount = data.keywords_count;\n  \n          } catch (error) {\n            console.error(\"Error loading data:\", error);\n          }\n        }\n      },async deleteVectorDB(){\n        if (window.confirm('確定要刪除向量資料庫嗎？')) {\n          const formData = new FormData();\n          formData.append('VBTable_name', this.VBselectedColumnsArray);\n          this.isLoading = true;\n          try{\n            const response = await fetch(web_api_url+'/remove_vector_table/', { // 替換為你的服務器端點\n              method: 'POST',\n              body: formData\n            });\n            const data = await response.json();\n            if (response.ok) {\n              if (data.isRemoved==true){alert('Vector DB刪除成功');}\n              if (data.isRemoved==false){alert('Vector DB原本就不存在');}\n            } else {\n              alert('Vector DB刪除發生異常:' + response.message);\n            }\n            console.log(\"Delete vector DB:\", data);\n          } \n          catch (error) {\n            console.error(\"Error loading data:\", error);\n          } finally {\n              this.isLoading = false;  // 結束\n              this.isFetching = false;\n          }\n        }\n      },async StartUpdateVDB(){\n  \n        if (this.VBselectedColumnsArray.length != 1) {\n          alert(\"請選擇1個欄位!\");\n          return;\n        }\n\n        // 使用FormData來上傳文件和列名\n        const formData = new FormData();\n        formData.append('VBTable_name', this.VBselectedColumnsArray);\n        \n        this.isFetching = !this.isFetching;   \n        try{\n          const response = await fetch(web_api_url+'/update_vector_DB/', { // 替換為你的服務器端點\n            method: 'POST',\n            body: formData\n          });\n          const data = await response.json();\n          console.log(\"Start Update vector DB:\", data);\n        } \n        catch (error) {\n          console.error(\"Error loading data:\", error);\n        }\n      },async vectorDB_info() {\n        try{\n          this.isWatchData = false;\n          const response = await fetch(web_api_url+'/return_table_information/');\n          const data = await response.json();\n          this.VBTables = data[\"vectorDB_table_name\"];\n          this.isPart3 = !this.isPart3;\n        } \n        catch (error) {\n          console.error(\"Error loading data:\", error);\n        }\n      },async handleVBSubmit() {\n        this.VBselectedColumnsArray = Object.keys(this.VBselectedColumns).filter(column => this.VBselectedColumns[column]);\n  \n        if (this.VBselectedColumnsArray.length != 1) {\n          alert(\"請選擇1個欄位!\");\n          return;\n        }\n\n        // 使用FormData來上傳文件和列名\n        const formData = new FormData();\n        formData.append('VBTable_name', this.VBselectedColumnsArray);\n        // console.log(\"formData\", formData);\n        // 開始上傳\n        this.isLoading = true;\n        try {\n          const response = await fetch(web_api_url+'/update_vector_DB/', { // 替換為你的服務器端點\n            method: 'POST',\n            body: formData\n          });\n          if (response.ok) {\n            alert('文件上傳成功！');\n            console.log(response); // 處理来自服務器的響應\n          } else {\n            alert('文件上傳失敗:' + response.message);\n          }\n        } catch (error) {\n          console.error(\"上傳錯誤:\", error);\n          alert('上傳過程中出現錯誤，請重試！');\n        } finally {\n          this.isLoading = false;  // 結束上傳\n          this.isServerReturn = true;\n        }\n      // },addData() {\n      //           if (this.newVBData) {\n      //               this.VBTables.push(this.newVBData);\n      //               this.newVBData = '';\n      //           } else {\n      //               alert('Please enter some data.');\n      //           }\n      },fetchData() {\n        axios.get(web_api_url+'/get_vector_DB_log')\n          .then(response => {\n            this.Flaskdata = response.data;\n            if (response.data['reload']===true){\n              this.isFetching = false;\n            }\n            if (response.data['over']===true){\n              this.isFetching = false;\n              this.isOver = true;\n            }\n          });\n      },toggleFetching() {\n        this.StartUpdateVDB() \n        if (this.isFetching) {\n          this.fetchData();\n          this.fetchInterval = setInterval(this.fetchData, 1000);\n        } else {\n          clearInterval(this.fetchInterval);  // 如果不抓取, 則停止定期抓取\n        }\n      }\n    }\n\n  }\n</script>\n\n<style>\n/* 加入些基本的樣式，讓表格看起來更整齊 */\n  table {\n    margin-top: 10px;\n    width: 100%;\n    border-collapse: collapse;\n    margin-bottom: 10px;\n    width: 500px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  \n  th, td {\n    border: 1px solid #ddd;\n    padding: 8px;\n  }\n  \n  th {\n    background-color: #f2f2f2;\n  }\n  .loading-overlay {\n    position: fixed;   /* 全屏覆盖 */\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(255, 255, 255, 0.8);  /* 半透明的白色背景 */\n    display: flex;  /* 使用 Flexbox */\n    justify-content: center;  /* 水平居中 */\n    align-items: center;  /* 垂直居中 */\n    z-index: 1000;  /* 保證在最前面 */\n  }\n  \n  .loading-image {\n    max-width: 400px;  /* 或其他合適的大小 */\n    max-height: 400px;\n  }\n\n  .submit-button{\n    margin-top: 50px;\n    margin-bottom: 50px;\n  }\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}