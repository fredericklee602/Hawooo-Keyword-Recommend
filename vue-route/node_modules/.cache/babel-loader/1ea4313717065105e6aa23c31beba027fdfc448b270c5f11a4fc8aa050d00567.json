{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-dab8119a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"選取\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"關鍵字\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"刪除\")])], -1 /* HOISTED */));\nconst _hoisted_2 = [\"onUpdate:modelValue\"];\nconst _hoisted_3 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"h3\", null, \"推薦關鍵字： \" + _toDisplayString($props.keyword), 1 /* TEXT */), _createElementVNode(\"table\", null, [_hoisted_1, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.recommendKeywords_list, recommended => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: recommended\n    }, [_createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"checkbox\",\n      \"onUpdate:modelValue\": $event => $data.selectedColumns[recommended] = $event\n    }, null, 8 /* PROPS */, _hoisted_2), [[_vModelCheckbox, $data.selectedColumns[recommended]]])]), _createElementVNode(\"td\", null, _toDisplayString(recommended), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.removeKeywordrequest(recommended)\n    }, \"Delete\", 8 /* PROPS */, _hoisted_3)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"button\", {\n    class: \"submit-button\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.SubmitRecommend && $options.SubmitRecommend(...args))\n  }, \"上傳同義詞庫\")]);\n}","map":{"version":3,"names":["_createElementVNode","_createElementBlock","_toDisplayString","$props","keyword","_hoisted_1","_Fragment","_renderList","recommendKeywords_list","recommended","key","type","$data","selectedColumns","$event","onClick","$options","removeKeywordrequest","_hoisted_3","class","_cache","args","SubmitRecommend"],"sources":["E:\\Fred\\AI_UI\\vue_route\\vue-route\\src\\components\\RecommendationKeywords.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <h3>推薦關鍵字： {{ keyword }}</h3>\r\n      <table>\r\n        <thead>\r\n            <tr>\r\n                <th>選取</th>\r\n                <th>關鍵字</th>\r\n                <th >刪除</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"recommended in recommendKeywords_list\" :key=\"recommended\">\r\n            <td><input type=\"checkbox\" v-model=\"selectedColumns[recommended]\"></td>\r\n            <td>{{ recommended }}</td>\r\n            <td><button @click=\"removeKeywordrequest(recommended)\">Delete</button></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <button class=\"submit-button\" @click=\"SubmitRecommend\" >上傳同義詞庫</button>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  const web_api_url = 'http://127.0.0.1:5000';\r\n  export default {\r\n    data(){\r\n        return{\r\n            selectedColumns:{}\r\n        }\r\n    },\r\n    props: {\r\n      keyword: String,\r\n      recommendKeywords_list: Array\r\n    },\r\n    methods: {\r\n      removeKeywordrequest(keyword) {\r\n        this.$emit('update-value', keyword);\r\n      },\r\n      async SubmitRecommend() {\r\n        this.selectedColumnsArray = Object.keys(this.selectedColumns).filter(column => this.selectedColumns[column]);\r\n  \r\n          if (this.selectedColumnsArray.length == 0) {\r\n            alert(\"請選擇1或1以上的欄位數量\");\r\n            return;\r\n          }  \r\n          // 使用FormData來上傳文件和列名\r\n          const formData = new FormData();\r\n          formData.append('keyword', this.keyword);\r\n          // console.log(\"selectedColumnsArray Names:\", this.selectedColumnsArray);\r\n          formData.append('synonyms', this.selectedColumnsArray);\r\n          // console.log(\"formData\", formData);\r\n          // 開始上傳\r\n          try {\r\n            const response = await fetch(web_api_url+'/synonyms_write/', { // 替換為你的服務器端點\r\n              method: 'POST',\r\n              body: formData\r\n            });\r\n            this.selectedColumns = {};\r\n            if (response.ok) {\r\n              alert('文件上傳成功！');\r\n              // console.log(response); // 處理来自服務器的響應\r\n            } else {\r\n              alert('文件上傳失敗:' + response.message);\r\n            }\r\n          } catch (error) {\r\n            console.error(\"上傳錯誤:\", error);\r\n            alert('上傳過程中出現錯誤，請重試！');\r\n          }\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n\r\n<style scoped>\r\ntable {\r\n  margin-top: 10px;\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: 10px;\r\n  width: 500px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\nth, td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\nth {\r\n  background-color: #f2f2f2;\r\n}\r\n</style>"],"mappings":";;gEAIQA,mBAAA,CAMQ,gB,aALJA,mBAAA,CAIK,a,aAHDA,mBAAA,CAAW,YAAP,IAAE,G,aACNA,mBAAA,CAAY,YAAR,KAAG,G,aACPA,mBAAA,CAAY,YAAP,IAAE,E;;;;uBAPnBC,mBAAA,CAmBM,cAlBJD,mBAAA,CAA6B,YAAzB,SAAO,GAAAE,gBAAA,CAAGC,MAAA,CAAAC,OAAO,kBACrBJ,mBAAA,CAeQ,gBAdNK,UAMQ,EACRL,mBAAA,CAMQ,iB,kBALNC,mBAAA,CAIKK,SAAA,QAAAC,WAAA,CAJqBJ,MAAA,CAAAK,sBAAsB,EAArCC,WAAW;yBAAtBR,mBAAA,CAIK;MAJ8CS,GAAG,EAAED;IAAW,IACjET,mBAAA,CAAuE,a,gBAAnEA,mBAAA,CAA8D;MAAvDW,IAAI,EAAC,UAAU;uCAAUC,KAAA,CAAAC,eAAe,CAACJ,WAAW,IAAAK;4DAA3BF,KAAA,CAAAC,eAAe,CAACJ,WAAW,G,KAC/DT,mBAAA,CAA0B,YAAAE,gBAAA,CAAnBO,WAAW,kBAClBT,mBAAA,CAA2E,aAAvEA,mBAAA,CAAkE;MAAzDe,OAAK,EAAAD,MAAA,IAAEE,QAAA,CAAAC,oBAAoB,CAACR,WAAW;OAAG,QAAM,iBAAAS,UAAA,E;sCAInElB,mBAAA,CAAuE;IAA/DmB,KAAK,EAAC,eAAe;IAAEJ,OAAK,EAAAK,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEL,QAAA,CAAAM,eAAA,IAAAN,QAAA,CAAAM,eAAA,IAAAD,IAAA,CAAe;KAAG,QAAM,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}