{"ast":null,"code":"const web_api_url = 'http://127.0.0.1:5000';\nexport default {\n  data() {\n    return {\n      newData: '',\n      selectedColumns: {}\n    };\n  },\n  props: {\n    keyword: String,\n    recommendKeywords_list: Array\n  },\n  methods: {\n    removeKeywordrequest(keyword) {\n      this.$emit('update-keyword', keyword);\n    },\n    addData() {\n      if (this.newData) {\n        this.$emit('update-newData', this.newData);\n        // console.log(\"this.selectedColumns\",this.selectedColumns)\n      }\n    },\n\n    async SubmitRecommend() {\n      this.selectedColumnsArray = Object.keys(this.selectedColumns).filter(column => this.selectedColumns[column]);\n      if (this.selectedColumnsArray.length == 0) {\n        alert(\"請選擇1或1以上的欄位數量\");\n        return;\n      }\n      // 使用FormData來上傳文件和列名\n      const formData = new FormData();\n      formData.append('keyword', this.keyword);\n      formData.append('synonyms', this.selectedColumnsArray);\n      // 開始上傳\n      try {\n        const response = await fetch(web_api_url + '/synonyms_write/', {\n          method: 'POST',\n          body: formData\n        });\n        this.selectedColumns = {};\n        if (response.ok) {\n          alert('文件上傳成功！');\n        } else {\n          alert('文件上傳失敗:' + response.message);\n        }\n      } catch (error) {\n        console.error(\"上傳錯誤:\", error);\n        alert('上傳過程中出現錯誤，請重試！');\n      }\n    }\n  }\n};","map":{"version":3,"names":["web_api_url","data","newData","selectedColumns","props","keyword","String","recommendKeywords_list","Array","methods","removeKeywordrequest","$emit","addData","SubmitRecommend","selectedColumnsArray","Object","keys","filter","column","length","alert","formData","FormData","append","response","fetch","method","body","ok","message","error","console"],"sources":["E:\\Fred\\AI_UI\\vue_route\\vue-route\\src\\components\\RecommendationKeywords.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <h4>關鍵字[{{ keyword }}]之候選同義詞</h4>\r\n      <!-- Input for adding new data -->\r\n      <div>\r\n        <input v-model=\"newData\" placeholder=\"手動新增同義詞...\" />\r\n        <button @click=\"addData\">新增同義詞</button>\r\n      </div>\r\n      <table>\r\n        <thead>\r\n            <tr>\r\n                <th>選取</th>\r\n                <th>關鍵字</th>\r\n                <th >刪除</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"recommended in recommendKeywords_list\" :key=\"recommended\">\r\n            <td><input type=\"checkbox\" v-model=\"selectedColumns[recommended]\"></td>\r\n            <td>{{ recommended }}</td>\r\n            <td><button @click=\"removeKeywordrequest(recommended)\">Delete</button></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <button class=\"submit-button\" @click=\"SubmitRecommend\" >上傳同義詞庫</button>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  const web_api_url = 'http://127.0.0.1:5000';\r\n  export default {\r\n    data(){\r\n        return{\r\n            newData: '',\r\n            selectedColumns:{}\r\n        }\r\n    },\r\n    props: {\r\n      keyword: String,\r\n      recommendKeywords_list: Array\r\n    },\r\n    methods: {\r\n      removeKeywordrequest(keyword) {\r\n        this.$emit('update-keyword', keyword);\r\n      },\r\n      addData() {\r\n        if (this.newData) {\r\n          this.$emit('update-newData', this.newData);\r\n          // console.log(\"this.selectedColumns\",this.selectedColumns)\r\n        }\r\n      },\r\n      async SubmitRecommend() {\r\n        this.selectedColumnsArray = Object.keys(this.selectedColumns).filter(column => this.selectedColumns[column]);\r\n  \r\n        if (this.selectedColumnsArray.length == 0) {\r\n          alert(\"請選擇1或1以上的欄位數量\");\r\n          return;\r\n        }  \r\n        // 使用FormData來上傳文件和列名\r\n        const formData = new FormData();\r\n        formData.append('keyword', this.keyword);\r\n        formData.append('synonyms', this.selectedColumnsArray);\r\n        // 開始上傳\r\n        try {\r\n          const response = await fetch(web_api_url+'/synonyms_write/', { \r\n            method: 'POST',\r\n            body: formData\r\n          });\r\n          this.selectedColumns = {};\r\n          if (response.ok) {\r\n            alert('文件上傳成功！');\r\n          } else {\r\n            alert('文件上傳失敗:' + response.message);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"上傳錯誤:\", error);\r\n          alert('上傳過程中出現錯誤，請重試！');\r\n        }\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n\r\n<style scoped>\r\ntable {\r\n  margin-top: 10px;\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-bottom: 10px;\r\n  width: 500px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\nth, td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\nth {\r\n  background-color: #f2f2f2;\r\n}\r\n</style>"],"mappings":"AA6BE,MAAMA,WAAU,GAAI,uBAAuB;AAC3C,eAAe;EACbC,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,OAAO,EAAE,EAAE;MACXC,eAAe,EAAC,CAAC;IACrB;EACJ,CAAC;EACDC,KAAK,EAAE;IACLC,OAAO,EAAEC,MAAM;IACfC,sBAAsB,EAAEC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACPC,oBAAoBA,CAACL,OAAO,EAAE;MAC5B,IAAI,CAACM,KAAK,CAAC,gBAAgB,EAAEN,OAAO,CAAC;IACvC,CAAC;IACDO,OAAOA,CAAA,EAAG;MACR,IAAI,IAAI,CAACV,OAAO,EAAE;QAChB,IAAI,CAACS,KAAK,CAAC,gBAAgB,EAAE,IAAI,CAACT,OAAO,CAAC;QAC1C;MACF;IACF,CAAC;;IACD,MAAMW,eAAeA,CAAA,EAAG;MACtB,IAAI,CAACC,oBAAmB,GAAIC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACb,eAAe,CAAC,CAACc,MAAM,CAACC,MAAK,IAAK,IAAI,CAACf,eAAe,CAACe,MAAM,CAAC,CAAC;MAE5G,IAAI,IAAI,CAACJ,oBAAoB,CAACK,MAAK,IAAK,CAAC,EAAE;QACzCC,KAAK,CAAC,eAAe,CAAC;QACtB;MACF;MACA;MACA,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAE,IAAI,CAAClB,OAAO,CAAC;MACxCgB,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE,IAAI,CAACT,oBAAoB,CAAC;MACtD;MACA,IAAI;QACF,MAAMU,QAAO,GAAI,MAAMC,KAAK,CAACzB,WAAW,GAAC,kBAAkB,EAAE;UAC3D0B,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEN;QACR,CAAC,CAAC;QACF,IAAI,CAAClB,eAAc,GAAI,CAAC,CAAC;QACzB,IAAIqB,QAAQ,CAACI,EAAE,EAAE;UACfR,KAAK,CAAC,SAAS,CAAC;QAClB,OAAO;UACLA,KAAK,CAAC,SAAQ,GAAII,QAAQ,CAACK,OAAO,CAAC;QACrC;MACF,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;QAC7BV,KAAK,CAAC,gBAAgB,CAAC;MACzB;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}